<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  </head>
  <body>
    <canvas id="latencyChart"></canvas>
    <script>
      const chartContainer = document.querySelector("#latencyChart");
      const latencyData = {
        labels: [],
        datasets: [
          {
            label: "Google Latency (ms)",
            data: [],
            borderColor: "#3e95cd",
            fill: false
          },
          {
            label: "YouTube Latency (ms)",
            data: [],
            borderColor: "#8e5ea2",
            fill: false
          }
        ]
      };
      const latencyChart = new Chart(chartContainer, {
        type: "line",
        data: latencyData,
        options: {
          scales: {
            yAxes: [
              {
                ticks: {
                  beginAtZero: true
                }
              }
            ]
          }
        }
      });

      function pingGoogle() {
        const startTime = performance.now();
        fetch("https://www.google.com/favicon.ico?" + new Date().getTime())
          .then(() => {
            const latency = performance.now() - startTime;
            latencyData.labels.push(new Date().toLocaleTimeString());
            latencyData.datasets[0].data.push(latency);
            latencyChart.update();
          })
          .catch(error => {
            console.error(error);
          });
      }

      function pingYouTube() {
        const startTime = performance.now();
        fetch("https://www.youtube.com/favicon.ico?" + new Date().getTime())
          .then(() => {
            const latency = performance.now() - startTime;
            latencyData.labels.push(new Date().toLocaleTimeString());
            latencyData.datasets[1].data.push(latency);
            latencyChart.update();
          })
          .catch(error => {
            console.error(error);
          });
      }

      setInterval(pingGoogle, 1000);
      setInterval(pingYouTube, 1000);
    </script>
  </body>
</html>
